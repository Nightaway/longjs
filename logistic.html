<!DOCTYPE html>
<html style="height: 100%">
<head>
    <meta charset="utf-8">
    <script type="text/javascript" src="torch.js"></script>
    <script type="text/javascript" src="logistic.js"></script>
    <script type="text/javascript" src="mnist.js"></script>
</head>
<body style="height: 100%; margin: 0">
        <div id="container" style="height: 100%"></div>
        <script type="text/javascript" src="echarts.min.js"></script>
        <script type="text/javascript">
            var dom = document.getElementById("container");
            var myChart = echarts.init(dom);
            var app = {};
            option = null;
            option = {
                xAxis: {
                    type: 'category',
                    data: []
                },
                yAxis: {
                    type: 'value'
                },
                series: [{
                    data: [],
                    type: 'line'
                }]
            };
            ;
            
            for (var j=0; j<10; j++) {
                for (var i=0; i<1000; i++) {
                    if (labels[i] == 0) {
                        var x = new Tensor(images[i])
                        console.log(images[i])
                        var loss = train(x, 0, 0.0001)
                        
                        if (i%10 == 0) {
                            // console.log("" + i +" 5 : " + loss)
                            option.xAxis.data.push((j*1000)+i)
                            option.series[0].data.push(loss)
                        }
                    } else if (labels[i] == 1) {
                        var x = new Tensor(images[i])
                        var loss = train(x, 1, 0.0001)
                        
                        if (i%10 == 0) {
                            // console.log("" + i +" 4: " + loss)
                            option.xAxis.data.push((j*1000)+i)
                            option.series[0].data.push(loss)
                        }
                    }
                }
            }
            if (option && typeof option === "object") {
                myChart.setOption(option, true);
            }
        </script>
</body>
</html>