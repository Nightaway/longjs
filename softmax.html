<!DOCTYPE html>
<html style="height: 100%">
<head>
    <meta charset="utf-8">
    <script type="text/javascript" src="torch.js"></script>
    <script type="text/javascript" src="mnist.js"></script>
</head>
<body style="height: 100%; margin: 0">
        <div id="container" style="height: 100%"></div>
        <script type="text/javascript">
            var lr = torch.tensor(0.001);
            var x = torch.const(1, 20);
            var model = nn.Sequentail(
                nn.Linear(20, 3),
                nn.Softmax()
            );
            // console.log(model);
            var y_ = model.pred(x);
            console.log(y_);
            var y = torch.const([1, 0, 0]);
            // console.log(y);

            var lossfunc = nn.MSELoss();
            var loss = lossfunc(y_, y);
            console.log(loss);
            loss.backward();

            console.log(model.parameters);
            // for (var z=0; z<model.parameters.length; z++) {
            //     // console.log(lr.mul(model.parameters[z].grad));
            //     // var newTensor = model.parameters[z].sub(lr.mul(model.parameters[z].grad));
            //     // for (var r=0; r<model.parameters[z].rows; r++) {
            //     //     for (var c=0; c<model.parameters[z].cols; c++) {
            //     //         model.parameters[z].mat[r][c] = newTensor.mat[r][c];
            //     //     }
            //     // }
            // }
        </script>
</body>
</html>